(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{70:function(e,t){},88:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(24),i=n.n(s),a=(n(33),n(89)),o=n(0),l=function(){return Object(o.jsxs)(a.a,{fluid:!0,className:"login-container",children:[Object(o.jsxs)("div",{className:"descript",children:[Object(o.jsxs)("div",{className:"topify-title",children:[Object(o.jsx)("img",{src:"./topify-logo.svg",alt:"logo-svg",className:"topify-logo"}),Object(o.jsx)("h1",{children:"Topify"})]}),Object(o.jsx)("h3",{children:" Find out your most listened Tracks and Artists on Spotify."}),Object(o.jsxs)("a",{className:"btn btn-success btn-lg",href:"https://accounts.spotify.com/authorize?client_id=b256d996ac324a3fa6765ae4287a195f&response_type=code&redirect_uri=https://topify-web.herokuapp.com/&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state%20user-read-recently-played%20user-read-playback-state%20user-top-read",children:[Object(o.jsx)("i",{class:"fa fa-spotify","aria-hidden":"true"})," Connect with Spotify"]})]}),Object(o.jsxs)("div",{className:"video-container",children:[Object(o.jsx)("div",{children:Object(o.jsxs)("video",{autoPlay:!0,loop:!0,muted:!0,playsInLine:!0,children:[Object(o.jsx)("source",{src:"./Videos/topify.mp4",type:"video/mp4"}),"Sorry, your browser doesn't support embedded videos."]})}),Object(o.jsxs)("p",{children:["You can disconnect Topify from your Spotify account"," ",Object(o.jsx)("a",{href:"https://www.spotify.com/us/account/apps/",target:"_blank",rel:"noreferrer",children:"here"})]})]}),Object(o.jsx)("footer",{children:"Made with â¤ by Hemani"})]})},u=n(3),d=n(10),j=n.n(d);var m=n(27),b=n.n(m);function h(e){var t=e.track;return Object(o.jsxs)("div",{className:"top-track-card",children:[Object(o.jsx)("a",{href:t.uri,children:Object(o.jsx)("img",{src:t.albumUrl,alt:"track-cover"})}),Object(o.jsx)("div",{className:"title",children:t.title.substring(0,20)}),Object(o.jsx)("div",{className:"text-mute",children:t.artist})]})}function p(e){var t=e.artist;return Object(o.jsxs)("div",{className:"top-artist-card",children:[Object(o.jsx)("a",{href:t.uri,children:Object(o.jsx)("img",{src:t.image,alt:"artist",className:"top-artist-img"})}),Object(o.jsx)("div",{className:"title",children:t.name})]})}function f(e){var t=e.changeSelect;return Object(o.jsx)("div",{className:"drop-down-container",onChange:t,children:Object(o.jsxs)("select",{name:"duration",className:"drop-down-tracks",children:[Object(o.jsx)("option",{value:"long_term",children:"all time"}),Object(o.jsx)("option",{value:"medium_term",children:"last 6 months"}),Object(o.jsx)("option",{value:"short_term",children:"last month"})]})})}function O(e){var t=e.handleChangeArtist;return Object(o.jsx)("div",{className:"drop-down-container",onChange:t,children:Object(o.jsxs)("select",{name:"duration",className:"drop-down-artists",children:[Object(o.jsx)("option",{value:"short_term",children:"last month"}),Object(o.jsx)("option",{value:"long_term",children:"all time"}),Object(o.jsx)("option",{value:"medium_term",children:"last 6 months"})]})})}n(87);var x=new b.a({clientId:"b256d996ac324a3fa6765ae4287a195f"});function g(e){var t=function(e){var t=Object(r.useState)(),n=Object(u.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(),a=Object(u.a)(i,2),o=a[0],l=a[1],d=Object(r.useState)(),m=Object(u.a)(d,2),b=m[0],h=m[1];return Object(r.useEffect)((function(){j.a.post("https://topify-web.herokuapp.com/login",{code:e}).then((function(e){s(e.data.accessToken),l(e.data.refreshToken),h(e.data.expiresIn),window.history.pushState({},null,"/")})).catch((function(){window.location="/"}))}),[e]),Object(r.useEffect)((function(){if(o&&b){var e=setInterval((function(){j.a.post("https://topify-web.herokuapp.com/refresh",{refreshToken:o}).then((function(e){s(e.data.accessToken),h(e.data.expiresIn)})).catch((function(){window.location="/"}))}),1e3*(b-60));return function(){return clearInterval(e)}}}),[o,b]),c}(e.code),n=Object(r.useState)([]),c=Object(u.a)(n,2),s=c[0],i=c[1],l=Object(r.useState)([]),d=Object(u.a)(l,2),m=d[0],b=d[1],g=Object(r.useState)("long_term"),v=Object(u.a)(g,2),y=v[0],k=v[1],w=Object(r.useState)("short_term"),S=Object(u.a)(w,2),L=S[0],_=S[1],N=window.screen.width,M=m.slice(0,1).map((function(e){return e.name})),T=m.slice(0,1).map((function(e){return e.name}));return document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".expand-btn-tracks");e.addEventListener("click",(function(t){var n=document.querySelector(".grid-container-tracks");e.classList.toggle("button-pressed"),e.classList.contains("button-pressed")?(n.style.maxHeight=n.scrollHeight+"px","See More"===e.innerHTML&&(e.innerHTML="See Less")):(n.style.maxHeight=0,"See Less"===e.innerHTML&&(e.innerHTML="See More")),t.stopImmediatePropagation()}))})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".expand-btn-artists");e.addEventListener("click",(function(t){var n=document.querySelector(".grid-container-artists");e.classList.toggle("button-pressed"),e.classList.contains("button-pressed")?(n.style.maxHeight=n.scrollHeight+"px","See More"===e.innerHTML&&(e.innerHTML="See Less")):(n.style.maxHeight=0,"See Less"===e.innerHTML&&(e.innerHTML="See More")),t.stopImmediatePropagation()}))})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".logout-btn"),t=document.querySelector(".logout-btn a");e.addEventListener("click",(function(n){e.classList.toggle("logout-pressed"),t.classList.toggle("show-logout"),n.stopImmediatePropagation()})),t.addEventListener("click",(function(e){window.open(" https://accounts.spotify.com/en/logout"),e.stopImmediatePropagation()}))})),Object(r.useEffect)((function(){t&&x.setAccessToken(t)}),[t]),Object(r.useEffect)((function(){t&&x.getMyTopTracks({limit:20,time_range:y}).then((function(e){i(e.body.items.map((function(e){var t=e.album.images.reduce((function(e,t){return t.height>e.height?t:e}),e.album.images[0]);return{artist:e.artists[0].name,title:e.name,uri:e.uri,albumUrl:t.url}})))}),(function(e){console.log("Something went wrong!",e)}))}),[t,y]),Object(r.useEffect)((function(){t&&x.getMyTopArtists({limit:20,time_range:L}).then((function(e){b(e.body.items.map((function(e){var t=e.images.reduce((function(e,t){return t.height>e.height?t:e}),e.images[0]);return{name:e.name,popularity:e.popularity,uri:e.uri,image:t.url}})))}),(function(e){console.log("Something went wrong!",e)}))}),[t,L]),Object(o.jsxs)(a.a,{fluid:!0,className:"main-container",children:[Object(o.jsxs)("h1",{children:["Your top songs of ",Object(o.jsx)(f,{changeSelect:function(){var e=document.querySelector(".drop-down-tracks");"long_term"===e.value?k("long_term"):"medium_term"===e.value?k("medium_term"):"short_term"===e.value&&k("short_term")}})]})," ",Object(o.jsxs)("button",{type:"button",className:"logout-btn",children:[Object(o.jsx)("a",{href:"/login",className:"logout-link",children:"Logout"}),Object(o.jsx)("i",{class:"fa fa-chevron-left"})]}),Object(o.jsxs)("div",{className:"grid-container",children:[N<660&&N>460&&s.slice(0,2).map((function(e){return Object(o.jsx)(h,{track:e},e.uri)})),N<860&&N>=660&&s.slice(0,3).map((function(e){return Object(o.jsx)(h,{track:e},e.uri)})),N<1100&&N>=860&&s.slice(0,4).map((function(e){return Object(o.jsx)(h,{track:e},e.uri)})),(N>=1100||N<=460)&&s.slice(0,5).map((function(e){return Object(o.jsx)(h,{track:e},e.uri)}))]}),Object(o.jsxs)("div",{className:" grid-container grid-container-tracks",children:[N<660&&N>460&&s.slice(2,21).map((function(e){return Object(o.jsx)(h,{track:e},e.uri)})),N<860&&N>=660&&s.slice(3,21).map((function(e){return Object(o.jsx)(h,{track:e},e.uri)})),N<1100&&N>=860&&s.slice(4,21).map((function(e){return Object(o.jsx)(h,{track:e},e.uri)})),(N>=1100||N<=460)&&s.slice(5,21).map((function(e){return Object(o.jsx)(h,{track:e},e.uri)}))]}),Object(o.jsx)("div",{className:"btn-container",children:Object(o.jsx)("button",{type:"button",className:"expand-btn-tracks",children:"See More"})}),Object(o.jsxs)("h1",{children:["Your top artists of"," ",Object(o.jsx)(O,{handleChangeArtist:function(){var e=document.querySelector(".drop-down-artists");"long_term"===e.value?_("long_term"):"medium_term"===e.value?_("medium_term"):"short_term"===e.value&&_("short_term")}})]}),Object(o.jsxs)("div",{className:"grid-container ",children:[N<660&&N>460&&m.slice(0,1).map((function(e){return Object(o.jsx)(p,{artist:e},e.uri)})),N<860&&N>=660&&m.slice(0,2).map((function(e){return Object(o.jsx)(p,{artist:e},e.uri)})),N<1100&&N>=860&&m.slice(0,3).map((function(e){return Object(o.jsx)(p,{artist:e},e.uri)})),(N>=1100||N<=460)&&m.slice(0,4).map((function(e){return Object(o.jsx)(p,{artist:e},e.uri)})),Object(o.jsxs)("div",{className:"text-container",children:["medium_term"===L&&Object(o.jsxs)("h3",{children:["You listen to a lot of",Object(o.jsx)("strong",{children:" "+T+" "})]}),"long_term"===L&&Object(o.jsxs)("h3",{children:["Your top artist of all time is",Object(o.jsx)("strong",{children:" "+T+" "})]}),"short_term"===L&&Object(o.jsxs)("h3",{children:["You've been listening to a lot of",Object(o.jsx)("strong",{children:" "+M+" "}),"lately"]})]})]}),Object(o.jsxs)("div",{className:"grid-container  grid-container-artists",children:[N<660&&N>460&&m.slice(1,19).map((function(e){return Object(o.jsx)(p,{artist:e},e.uri)})),N<860&&N>=660&&m.slice(2,19).map((function(e){return Object(o.jsx)(p,{artist:e},e.uri)})),N<1100&&N>=860&&m.slice(3,19).map((function(e){return Object(o.jsx)(p,{artist:e},e.uri)})),(N>=1100||N)<460&&m.slice(4,19).map((function(e){return Object(o.jsx)(p,{artist:e},e.uri)}))]}),Object(o.jsx)("div",{className:"btn-container",children:Object(o.jsx)("button",{type:"button",className:"expand-btn-artists",children:"See More"})})]})}var v=new URLSearchParams(window.location.search).get("code");var y=function(){return v?Object(o.jsx)("div",{children:Object(o.jsx)(g,{code:v})}):Object(o.jsx)(l,{})};i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(y,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.4140acf8.chunk.js.map